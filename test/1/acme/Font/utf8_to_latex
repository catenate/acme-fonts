#!/bin/bash
# $Id: utf8_to_latex,v 1.13 2012/06/06 15:01:45 chris Exp $
# Converts UTF-8 encoded plain text to LaTeX.
# Author: Christian Steinruecken
# 
# KNOWN ISSUES:
#   using \dag and \ddag instead of $\dagger$ and $\ddagger$
#   using \{ and \} instead of $\lbrace$ and $\rbrace$
#   using [ and ] instead of $\lbrack$ and $\rbrack$
#   ŉ is approximated by 'n
#   Ĳ is approximated by IJ, and ĳ by ij
#   Ŀ and ŀ are approximated with L\! or l followed by \cdot
#   {Ħ, ħ, Ŧ, ŧ} are encoded with \B{·} and may need special support
#   Latin-A symbols omitted in current version: ĸ Ņ ņ Ļ ļ Ģ ģ Ŗ ŗ Ţ ţ ſ
#
sed '
s/\\/\\backslash{}/g
s%{%\\{%g
s%}%\\}%g
s%\\backslash\\{\\}%\\backslash{}%g
s/\$/\\$/g
s%\^%\\textasciicircum{}%g
s/&/\&/g
s/&/\&/g
s/%/\\%/g
s/#/\\#/g
s/_/\\_/g
s/&/\\&/g
s/ﬀ/ff/g
s/ﬁ/fi/g
s/ﬂ/fl/g
s/ﬃ/ffi/g
s/ﬄ/ffl/g
s/¡/!`/g
s/¿/?`/g
s/‟/``/g
s/“/``/g
s/”/'"''"'/g
s/œ/\\oe{}/g
s/Œ/\\OE{}/g
s/æ/\\ae{}/g
s/Æ/\\AE{}/g
s/å/\\aa{}/g
s/Å/\\AA{}/g
s/ø/\\o{}/g
s/Ø/\\O{}/g
s/ł/\\l{}/g
s/Ł/\\L{}/g
s/ß/\\ss{}/g
s/ẞ/\\SS{}/g
s/Ç/\\c{C}/g
s/ç/\\c{c}/g
s/§/\\S{}/g
s/¶/\\P{}/g
s/À/\\`A/g
s/Á/\\'"'"'A/g
s/Â/\\^A/g
s/Ã/\\~A/g
s/Ä/\\"A/g
s/È/\\`E/g
s/É/\\'"'"'E/g
s/Ê/\\^E/g
s/Ë/\\"E/g
s/Ì/\\`I/g
s/Í/\\'"'"'I/g
s/Î/\\^I/g
s/Ï/\\"I/g
s/Ð/\\DH{}/g
s/Ñ/\\~N/g
s/Ò/\\`O/g
s/Ó/\\'"'"'O/g
s/Ô/\\^O/g
s/Õ/\\~O/g
s/Ö/\\"O/g
s/Ù/\\`U/g
s/Ú/\\'"'"'U/g
s/Û/\\^U/g
s/Ü/\\"U/g
s/Ý/\\'"'"'Y/g
s/Þ/\TH{}/g
s/à/\\`a/g
s/á/\\'"'"'a/g
s/â/\\^a/g
s/ã/\\~a/g
s/ä/\\"a/g
s/è/\\`e/g
s/é/\\'"'"'e/g
s/ê/\\^e/g
s/ë/\\"e/g
s/ì/\\`{\\i}/g
s/í/\\'"'"'{\\i}/g
s/î/\\^{\i}/g
s/ï/\\"{\i}/g
s/ð/\\dh{}/g
s/ñ/\\~n/g
s/ò/\\`o/g
s/ó/\\'"'"'o/g
s/ô/\\^o/g
s/õ/\\~o/g
s/ö/\\"o/g
s/ù/\\`u/g
s/ú/\\'"'"'u/g
s/û/\\^u/g
s/ü/\\"u/g
s/ý/\\'"'"'y/g
s/þ/\th{}/g
s/ÿ/\\"y/g
s/Ā/\\={A}/g
s/ā/\\={a}/g
s/Ă/\\u{A}/g
s/ă/\\u{a}/g
s/Ą/\\k{A}/g
s/ą/\\k{a}/g
s/Ć/\\'"'"'C/g
s/ć/\\'"'"'c/g
s/Ĉ/\\^C/g
s/ĉ/\\^c/g
s/Ċ/\\.C/g
s/ċ/\\.c/g
s/Č/\\v{C}/g
s/č/\\v{c}/g
s/Ď/\\v{D}/g
s/ď/\\v{d}/g
s/Đ/\\DJ{}/g
s/đ/\\dj{}/g
s/Ē/\\={E}/g
s/ē/\\={e}/g
s/Ĕ/\\u{E}/g
s/ĕ/\\u{e}/g
s/Ė/\\.E/g
s/ė/\\.e/g
s/Ę/\\k{E}/g
s/ę/\\k{e}/g
s/Ě/\\v{E}/g
s/ě/\\v{e}/g
s/Ĝ/\\^{G}/g
s/ĝ/\\^{g}/g
s/Ğ/\\u{G}/g
s/ğ/\\u{g}/g
s/Ġ/\\.G/g
s/ġ/\\.g/g
s/Ĥ/\\^H/g
s/ĥ/\\^h/g
s/Ħ/\\B{H}/g
s/ħ/\\B{h}/g
s/Ĩ/\\~I/g
s/ĩ/\\~i/g
s/Ī/\\=I/g
s/ī/\\={\\i}/g
s/Ĭ/\\u{I}/g
s/ĭ/\\u{\\i}/g
s/Į/\\k{I}/g
s/į/\\k{i}/g
s/İ/\\.I/g
s/ı/\\i/g
s/Ĳ/IJ/g
s/ĳ/ij/g
s/Ĵ/\\^J/g
s/ĵ/\\^{\\j}/g
s/Ķ/\\c{K}/g
s/ķ/\\c{k}/g
s/Ĺ/\\'"'"'L/g
s/ĺ/\\'"'"'l/g
s/Ľ/\\v{L}/g
s/ľ/\\v{l}/g
s/Ŀ/L\\!\\cdot{}/g
s/ŀ/l\\cdot{}/g
s/Ń/\\'"'"'N/g
s/ń/\\'"'"'n/g
s/Ň/\\v{N}/g
s/ň/\\v{n}/g
s/ŉ/'"'"'n/g
s/Ŋ/\\NG/g
s/ŋ/\\ng/g
s/Ō/\\=O/g
s/ō/\\=o/g
s/Ŏ/\\u{O}/g
s/ŏ/\\u{o}/g
s/Ő/\\H{O}/g
s/ő/\\H{o}/g
s/Ŕ/\\'"'"'R/g
s/ŕ/\\'"'"'r/g
s/Ř/\\v{R}/g
s/ř/\\v{r}/g
s/Ś/\\'"'"'S/g
s/ś/\\'"'"'s/g
s/Ŝ/\\^S/g
s/ŝ/\\^s/g
s/Ş/\\c{S}/g
s/ş/\\c{s}/g
s/Š/\\v{S}/g
s/š/\\v{s}/g
s/Ť/\\v{T}/g
s/ť/\\v{t}/g
s/Ŧ/\\B{T}/g
s/ŧ/\\B{t}/g
s/Ũ/\\~U/g
s/ũ/\\~u/g
s/Ū/\\=U/g
s/ū/\\=u/g
s/Ŭ/\\u{U}/g
s/ŭ/\\u{u}/g
s/Ů/\\r{U}/g
s/ů/\\r{r}/g
s/Ű/\\H{U}/g
s/ű/\\H{u}/g
s/Ų/\\k{U}/g
s/ų/\\k{u}/g
s/Ŵ/\\^W/g
s/ŵ/\\^w/g
s/Ŷ/\\^Y/g
s/ŷ/\\^y/g
s/Ÿ/\\"Y/g
s/Ź/\\'"'"'Z/g
s/ź/\\'"'"'z/g
s/Ż/\\.Z/g
s/ż/\\.z/g
s/Ž/\\v{Z}/g
s/ž/\\v{z}/g
s/†/\\dag{}/g
s/‡/\\ddag{}/g
s/©/\\copyright{}/g
s/£/\\pounds{}/g
s/…/\\ldots{}/g
s%α%$\\alpha{}$%g 
s%β%$\\beta{}$%g
s%γ%$\\gamma{}$%g
s%δ%$\\delta{}$%g
s%ϵ%$\\epsilon{}$%g
s%ε%$\\varepsilon{}$%g
s%ζ%$\\zeta{}$%g
s%η%$\\eta{}$%g
s%θ%$\\theta{}$%g
s%ϑ%$\\vartheta{}$%g
s%ι%$\\iota{}$%g
s%κ%$\\kappa{}$%g
s%λ%$\\lambda{}$%g
s%μ%$\\mu{}$%g
s%ν%$\\nu{}$%g
s%ξ%$\\xi{}$%g
s%ο%o$%g
s%π%$\\pi{}$%g
s%ϖ%$\\varpi{}$%g
s%ρ%$\\rho{}$%g
s%ϱ%$\\varrho{}$%g
s%σ%$\\sigma{}$%g
s%ς%$\\varsigma{}$%g
s%τ%$\\tau{}$%g
s%υ%$\\upsilon{}$%g
s%ϕ%$\\phi{}$%g
s%φ%$\\varphi{}$%g
s%χ%$\\chi{}$%g
s%ψ%$\\psi{}$%g
s%ω%$\\omega{}$%g
s%Γ%$\\Gamma{}$%g
s%Δ%$\\Delta{}$%g
s%Θ%$\\Theta{}$%g
s%Λ%$\\Lambda{}$%g
s%Ξ%$\\Xi{}$%g
s%Π%$\\Pi{}$%g
s%Σ%$\\Sigma{}$%g
s%Υ%$\\Upsilon{}$%g
s%Φ%$\\Phi{}$%g
s%Ψ%$\\Psi{}$%g
s%Ω%$\\Omega{}$%g
s%ℵ%$\\aleph{}$%g
s%∀%$\\forall{}$%g
s%ℏ%$\\hbar{}$%g
s%ı%$\\imath{}$%g
s%ȷ%$\\jmath{}$%g
s%ℓ%$\\ell{}$%g
s%℘%$\\wp{}$%g
s%ℜ%$\\Re{}$%g
s%ℑ%$\\Im{}$%g
s%∂%$\\partial{}$%g
s%∞%$\\infty{}$%g
s%□%$\\Box{}$%g
s%◇%$\\Diamond{}$%g
s%∅%$\\emptyset{}$%g
s%∇%$\\nabla{}$%g
s%√%$\\surd{}$%g
s%⊤%$\\top{}$%g
s%⊥%$\\bot{}$%g
s%∥%$\\|$%g
s%∠%$\\angle{}$%g
s%△%$\\triangle{}$%g
s%∃%$\\exists{}$%g
s%¬%$\\neg{}$%g
s%♭%$\\flat{}$%g
s%♮%$\\natural{}$%g
s%♯%$\\sharp{}$%g
s%♡%$\\heartsuit{}$%g
s%♠%$\\spadesuit{}$%g
s%♣%$\\clubsuit{}$%g
s%♢%$\\diamondsuit{}$%g
s%∑%$\\sum$%g
s%∏%$\\prod$%g
s%∐%$\\coprod$%g
s%∫%$\\int$%g
s%∮%$\\oint$%g
s%⋂%$\\bigcap$%g
s%⋃%$\\bigcup$%g
s%⨆%$\\bigsqcup$%g
s%⋁%$\\bigvee$%g
s%⋀%$\\bigwedge$%g
s%⨀%$\\bigodot$%g
s%⨂%$\\bigotimes$%g
s%⨁%$\\bigoplus$%g
s%⨄%$\\biguplus$%g
s%±%$\\pm{}$%g
s%∓%$\\mp{}$%g
s%∖%$\\setminus{}$%g
s%⋅%$\\cdot{}$%g
s%×%$\\times{}$%g
s%∗%$\\ast{}$%g
s%⋆%$\\star{}$%g
s%⋄%$\\diamond{}$%g
s%∘%$\\circ{}$%g
s%∙%$\\bullet{}$%g
s%÷%$\\div{}$%g
s%⊲%$\\lhd{}$%g
s%∩%$\\cap{}$%g
s%∪%$\\cup{}$%g
s%⊎%$\\uplus{}$%g
s%⊓%$\\sqcap{}$%g
s%⊔%$\\sqcup{}$%g
s%◁%$\\triangleleft{}$%g
s%▷%$\\triangleright{}$%g
s%≀%$\\wr{}$%g
s%◯%$\\bigcirc{}$%g
s%△%$\\bigtriangleup{}$%g
s%▽%$\\bigtriangledown{}$%g
s%⊳%$\\rhd{}$%g
s%∨%$\\vee{}$%g
s%∧%$\\wedge{}$%g
s%⊕%$\\oplus{}$%g
s%⊖%$\\ominus{}$%g
s%⊗%$\\otimes{}$%g
s%⊘%$\\oslash{}$%g
s%⊙%$\\odot{}$%g
s%⨿%$\\amalg{}$%g
s%⊴%$\\unlhd{}$%g
s%⊵%$\\unrhd{}$%g
s%≤%$\\leq{}$%g
s%≺%$\\prec{}$%g
s%≼%$\\preceq{}$%g
s%≪%$\\ll{}$%g
s%⊂%$\\subset{}$%g
s%⊆%$\\subseteq{}$%g
s%⊑%$\\sqsubseteq{}$%g
s%∈%$\\in{}$%g
s%⊢%$\\vdash{}$%g
s%⌣%$\\smile{}$%g
s%⌢%$\\frown{}$%g
s%⊏%$\\sqsubset{}$%g
s%≥%$\\geq{}$%g
s%≻%$\\succ{}$%g
s%≽%$\\succeq{}$%g
s%≫%$\\gg{}$%g
s%⊃%$\\supset{}$%g
s%⊇%$\\supseteq{}$%g
s%⊒%$\\sqsupseteq{}$%g
s%∋%$\\ni{}$%g
s%⊣%$\\dashv{}$%g
s%∣%$\\mid{}$%g
s%∥%$\\parallel{}$%g
s%⊐%$\\sqsupset{}$%g
s%≡%$\\equiv{}$%g
s%∼%$\\sim{}$%g
s%≃%$\\simeq{}$%g
s%≍%$\\asymp{}$%g
s%≈%$\\approx{}$%g
s%≅%$\\cong{}$%g
s%⋈%$\\bowtie{}$%g
s%∝%$\\propto{}$%g
s%⊨%$\\models{}$%g
s%≐%$\\doteq{}$%g
s%⊥%$\\perp{}$%g
s%⨝%$\\Join{}$%g
s%≮%$\\not<{}$%g
s%≰%$\\not\leq{}$%g
s%⊀%$\\not\prec{}$%g
s%⋠%$\\not\preceq{}$%g
s%⊄%$\\not\subset{}$%g
s%⊈%$\\not\subseteq{}$%g
s%⋢%$\\not\sqsubseteq{}$%g
s%≯%$\\not>{}$%g
s%≱%$\\not\geq{}$%g
s%⊁%$\\not\succ{}$%g
s%⋡%$\\not\succeq{}$%g
s%⊅%$\\not\supset{}$%g
s%⊉%$\\not\supseteq{}$%g
s%⋣%$\\not\sqsupseteq{}$%g
s%≠%$\\not=$%g
s%≢%$\\not\equiv{}$%g
s%≁%$\\not\sim{}$%g
s%≄%$\\not\simeq{}$%g
s%≉%$\\not\approx{}$%g
s%≇%$\\not\cong{}$%g
s%≭%$\\not\asymp{}$%g
s%←%$\\leftarrow{}$%g
s%⇐%$\\Leftarrow{}$%g
s%→%$\\rightarrow{}$%g
s%⇒%$\\Rightarrow{}$%g
s%↑%$\\uparrow{}$%g
s%⇑%$\\Uparrow{}$%g
s%↓%$\\downarrow{}$%g
s%⇓%$\\Downarrow{}$%g
s%↔%$\\leftrightarrow{}$%g
s%⇔%$\\Leftrightarrow{}$%g
s%↕%$\\updownarrow{}$%g
s%⇕%$\\Updownarrow{}$%g
s%↦%$\\mapsto{}$%g
s%↩%$\\hookleftarrow{}$%g
s%↼%$\\leftharpoonup{}$%g
s%↽%$\\leftharpoondown{}$%g
s%⇌%$\\rightleftharpoons{}$%g
s%↗%$\\nearrow{}$%g
s%↘%$\\searrow{}$%g
s%↙%$\\swarrow{}$%g
s%↖%$\\nwarrow{}$%g
s%↝%$\\leadsto{}$%g
s%⟵%$\\longleftarrow{}$%g
s%⟸%$\\Longleftarrow{}$%g
s%⟶%$\\longrightarrow{}$%g
s%⟹%$\\Longrightarrow{}$%g
s%⟷%$\\longleftrightarrow{}$%g
s%⟺%$\\Longleftrightarrow{}$%g
s%⟼%$\\longmapsto{}$%g
s%↪%$\\hookrightarrow{}$%g
s%⇀%$\\rightharpoonup{}$%g
s%⇁%$\\rightharpoondown{}$%g
s%⌊%$\\lfloor{}$%g
s%⌋%$\\rfloor{}$%g
s%⌈%$\\lceil{}$%g
s%⌉%$\\rceil{}$%g
s%⟦%[\\![$%g
s%⟧%]\\!]$%g
s%ℂ%$\\mathbb{C}$%g
s%ℕ%$\\mathbb{N}$%g
s%ℙ%$\\mathbb{P}$%g
s%ℚ%$\\mathbb{Q}$%g
s%ℝ%$\\mathbb{R}$%g
s%ℤ%$\\mathbb{Z}$%g
s%Ⅰ%I%g
s%Ⅱ%II%g
s%Ⅲ%III%g
s%Ⅳ%IV%g
s%Ⅴ%V%g
s%Ⅵ%VI%g
s%Ⅶ%VII%g
s%Ⅷ%VIII%g
s%Ⅸ%IX%g
s%Ⅹ%X%g
s%Ⅺ%XI%g
s%Ⅻ%XII%g
s%Ⅼ%L%g
s%Ⅽ%C%g
s%Ⅾ%D%g
s%Ⅿ%M%g
s%ⅰ%i%g
s%ⅱ%ii%g
s%ⅲ%iii%g
s%ⅳ%iv%g
s%ⅴ%v%g
s%ⅵ%vi%g
s%ⅶ%vii%g
s%ⅷ%viii%g
s%ⅸ%ix%g
s%ⅹ%x%g
s%ⅺ%xi%g
s%ⅻ%xii%g
s%ⅼ%l%g
s%ⅽ%c%g
s%ⅾ%d%g
s%ⅿ%m%g
s%½%$\\frac12$%g
s%¼%$\\frac14$%g
s%¾%$\\frac34$%g
s%⅓%$\\frac13$%g
s%⅔%$\\frac23$%g
s%⅕%$\\frac15$%g
s%⅖%$\\frac25$%g
s%⅗%$\\frac35$%g
s%⅘%$\\frac45$%g
s%⅙%$\\frac16$%g
s%⅚%$\\frac56$%g
s%⅛%$\\frac18$%g
s%⅜%$\\frac38$%g
s%⅝%$\\frac58$%g
s%⅞%$\\frac78$%g
s%⁰%$^{0}$%g
s%¹%$^{1}$%g
s%²%$^{2}$%g
s%³%$^{3}$%g
s%⁴%$^{4}$%g
s%⁵%$^{5}$%g
s%⁶%$^{6}$%g
s%⁷%$^{7}$%g
s%⁸%$^{8}$%g
s%⁹%$^{9}$%g
s%⁺%$^{+}$%g
s%⁻%$^{-}$%g
s%⁼%$^{=}$%g
s%ⁱ%$^{i}$%g
s%ⁿ%$^{n}$%g
s%⁽%$^{(}$%g
s%⁾%$^{)}$%g
s%₀%$_{0}$%g
s%₁%$_{1}$%g
s%₂%$_{2}$%g
s%₃%$_{3}$%g
s%₄%$_{4}$%g
s%₅%$_{5}$%g
s%₆%$_{6}$%g
s%₇%$_{7}$%g
s%₈%$_{8}$%g
s%₉%$_{9}$%g
s%₊%$_{+}$%g
s%₋%$_{-}$%g
s%₌%$_{=}$%g
s%₍%$_{(}$%g
s%₎%$_{)}$%g
s%ₐ%$_{a}$%g
s%ₑ%$_{e}$%g
s%ₒ%$_{o}$%g
s%ₓ%$_{x}$%g
s%ₕ%$_{h}$%g
s%ₖ%$_{k}$%g
s%ₗ%$_{l}$%g
s%ₘ%$_{m}$%g
s%ₙ%$_{n}$%g
s%ₚ%$_{p}$%g
s%ₛ%$_{s}$%g
s%ₜ%$_{t}$%g
s%™%\\texttrademark{}%g
s%ª%\\textordfeminine{}%g
s%º%\\textordmasculine{}%g
s%⟨%$\\langle{}$%g
s%⟩%$\\rangle{}$%g
s%⟪%$\\langle\!\langle{}$%g
s%⟫%$\\rangle\!\rangle{}$%g
s%⋮%$\\vdots{}$%g
s%⋯%$\\cdots{}$%g
s%⋱%$\\ddots{}$%g
s%𝐴%$A$%g
s%𝐵%$B$%g
s%𝐶%$C$%g
s%𝐷%$D$%g
s%𝐸%$E$%g
s%𝐹%$F$%g
s%𝐺%$G$%g
s%𝐻%$H$%g
s%𝐼%$I$%g
s%𝐽%$J$%g
s%𝐾%$K$%g
s%𝐿%$L$%g
s%𝑀%$M$%g
s%𝑁%$N$%g
s%𝑂%$O$%g
s%𝑃%$P$%g
s%𝑄%$Q$%g
s%𝑅%$R$%g
s%𝑆%$S$%g
s%𝑇%$T$%g
s%𝑈%$U$%g
s%𝑉%$V$%g
s%𝑊%$W$%g
s%𝑋%$X$%g
s%𝑌%$Y$%g
s%𝑍%$Z$%g
s%𝑎%$a$%g
s%𝑏%$b$%g
s%𝑐%$c$%g
s%𝑑%$d$%g
s%𝑒%$e$%g
s%𝑓%$f$%g
s%𝑔%$g$%g
s%ℎ%$h$%g
s%𝑖%$i$%g
s%𝑗%$j$%g
s%𝑘%$k$%g
s%𝑙%$l$%g
s%𝑚%$m$%g
s%𝑛%$n$%g
s%𝑜%$o$%g
s%𝑝%$p$%g
s%𝑞%$q$%g
s%𝑟%$r$%g
s%𝑠%$s$%g
s%𝑡%$t$%g
s%𝑢%$u$%g
s%𝑣%$v$%g
s%𝑤%$w$%g
s%𝑥%$x$%g
s%𝑦%$y$%g
s%𝑧%$z$%g;
s%\(.\)$̂%\\hat{\1}$%g;
s%\(.\)$̀%\\grave{\1}$%g;
s%\(.\)$́%\\acute{\1}$%g;
s%\(.\)$̃%\\tilde{\1}$%g;
s%\(.\)$̇%\\dot{\1}$%g;
s%\(.\)$̈%\\ddot{\1}$%g;
s%\(.\)$̆%\\breve{\1}$%g;
s%\(.\)$̄%\\bar{\1}$%g;
s%\(.\)$̌%\\check{\1}$%g;
s%\(.\)$⃗%\\vec{\1}$%g;
s% log\$_{\(.\)}% \$\\log_{\1}%g;
s%[[:digit:]]%$&$%g;
:a; s/\$^{\([[:digit:]+-=()ni]*\)}\$\$^{/$^{\1/g; t a;
:b; s/\$_{\([[:digit:]+-=()]*\)}\$\$_{/$_{\1/g; t b;
s/\$-\$/-/g;
s/\$+\$/+/g;
s/\$=\$/+/g;
s/\$ - \$/ - /g;
s/\$ + \$/ + /g;
s/\$ = \$/ = /g;
s/(\$\(.\)\$)/\$(\1)\$/g;
s/\$ \$/ /g;
s/\$\$//g;
s%\$\([ [:digit:]+-=/]*\)\$%\1%g;'
